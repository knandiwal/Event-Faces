<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
<head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=medium-dpi" />
          
        <link rel="stylesheet"  href="css/jquery.mobile-1.3.2.min.css" />
        <link href="css/jqm-icon-pack-fa.scss" rel="stylesheet" />

        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="js/jquery.js"></script>
        
        <script src="js/jquery.mobile-1.3.2.min.js"></script>
        
        <style type="text/css">
                #frontpage {
                        background-attachment: fixed;
                        background-image: url(img/peoplebg.png);
                        background-repeat: no-repeat;
                        background-position: center center;
                }
        </style>
        <title>SeeYou</title>
        
        <script type="text/javascript">
            
            // Global Variables
            var db;
            
            // Wait for PhoneGap to load
            //
           document.addEventListener("deviceready", onDeviceReady, false);

            // PhoneGap is ready
            //
            function onDeviceReady() {
                alert("onDeviceReady!");
                db = window.openDatabase("EventFacesDB", "1.0", "Event Faces Database", 200000);
                db.transaction(createDB, errorCB, successCB);
            }
            
            // Populate the database 
            //
            function createDB(tx) {
                tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_Events (id unique, title, description, geo_tag_lat, geo_tag_long, date_time, post_to_soc_media_event_folder)');
                tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_Faces (id unique, file_name, file_location, face_name, face_vector, photo_id, event_id, identity_id)');
                tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_Photos (id unique, file_name, file_location, event_id)');
                tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_Identity (id person_name, file_name, file_location, identity_vector)');
                tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_Social (id unique, service, login, password)');
            }

            // Transaction error callback
            //
            function errorCB(tx, err) {
                alert("Error processing SQL: "+ tx.toString() + " =>" + err.toString());
            }

            // Transaction success callback
            //
            function successCB() {
                alert("successCB()...");
                db.transaction(queryDB, errorCB);
                alert("dispatched queryDB()!");
            }
            
            function queryDB(tx) {
                tx.executeSql('SELECT * FROM tbl_Events', [], querySuccess, errorCB);
            }
            
            // Query the success callback
            //
            function querySuccess(tx, results) {
                alert("querySuccess()...start!");
                alert("Insert ID = " + results.rows.length);                
                
                // this will be empty since no rows were inserted.
                //console.log("Insert ID = " + results.insertId);
                // this will be 0 since it is a select statement
                //console.log("Rows Affected = " + results.rowAffected);
                // the number of rows returned by the select statement
                //console.log("Insert ID = " + results.rows.length);
                
                // Create and Initialize App Folder, config files, etc.
               // initAppFolder();
                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, gotFSFail);
            }
            
            function initAppFolder() {
                // Create app folder
                window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, gotFSFail);
                
                // Create config/settings text file inside app folder
                
            }
            
            function gotFSFail(err) {
                alert("Unable to acquire file system: " + err.code);
            }
            
            function gotFS(fileSystem) {
                alert("Got File System: " + filesystem.name);
                fileSystem.root.getDirectory("app_data", {create: true}, gotDir, gotDirFail);
             }
             
             function gotDir(dirEntry) {
                 alert("Created directory: " + dirEntry.name);
                //dirEntry.getFile("user_settings.txt", {create: true, exclusive: true}, gotFile);
            }
            
            function gotDirFail(err) {
                alert("Unable to create directory: " + err.code);
            }

            function gotFile(fileEntry) {
                // Do something with fileEntry here
            }

        </script>
        
    </head>


    <body>
        <div data-role="page" id="frontpage">
            
                <div data-role="header">
                    <h1>SeeYou</h1>
                </div>
            
                <div data-role="content" id="content" >
                    
                    <a href="event.html" data-role="button" data-icon="plus" >Events</a>
                    <a href="gallery.html" data-role="button" data-icon="camera" >Gallery</a>
                    <a href="faces.html" data-role="button" data-icon="grid" >Faces</a>
                    <a href="settings.html" data-role="button" data-icon="gear" >Settings</a>
                    
                </div>
            
                <div data-role="footer" data-theme="a" data-position="fixed">
                    <h1>Your Friends, Your event!</h1>
                </div>

            </div>
        
        <script type="text/javascript">
            frontpage.initialize();
        </script>
        
    </body>
</html>